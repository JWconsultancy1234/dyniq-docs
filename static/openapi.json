{"openapi":"3.1.0","info":{"title":"DYNIQ Agents API","description":"REST API for LangGraph lead processing and content generation","version":"1.2.0"},"paths":{"/api/process-lead":{"post":{"tags":["leads"],"summary":"Process Lead Endpoint","description":"Process a lead through the LangGraph pipeline.\n\nThis endpoint is called by n8n after quiz completion.\nIt runs research, verification, qualification, and playbook generation.\n\nArgs:\n    request: Lead data from n8n webhook\n\nReturns:\n    ProcessLeadResponse with tier, playbook, and next action\n\nRaises:\n    HTTPException: If processing fails or times out","operationId":"process_lead_endpoint_api_process_lead_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessLeadRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessLeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/content/create":{"post":{"tags":["content"],"summary":"Create Content","description":"Create content through the content team graph.\n\nSupports:\n- text: Generate text content via Kimi K2.5 PARL\n- visual: Generate images via FLUX.2 Pro\n- combined: Both in parallel\n\nMay pause at HITL review - returns thread_id for resume.\nStores generation in vector DB for self-learning.","operationId":"create_content_api_content_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContentCreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContentCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/hitl/resume":{"post":{"tags":["hitl"],"summary":"Resume Review","description":"Resume a paused graph with HITL decision.\n\nCalled by n8n after Telegram approval/rejection/edit.\nStores decision in vector DB for learning.","operationId":"resume_review_api_hitl_resume_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HITLResumeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HITLResumeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/hitl/pending":{"get":{"tags":["hitl"],"summary":"List Pending","description":"List pending HITL items awaiting approval.\n\nNote: In production, this should query content_generations table\nfor status='pending_review' instead of in-memory dict.","operationId":"list_pending_api_hitl_pending_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HITLPendingResponse"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/board-meeting/analyze":{"post":{"tags":["board-meeting"],"summary":"Analyze Board Meeting","description":"Start board meeting analysis.\n\nFor Level 0-2: Runs synchronously (completes within Cloudflare 100s limit).\nFor Level 3+: Runs asynchronously, returns immediately with thread_id.\n              Client should poll GET /status/{thread_id} until complete.\n\nSAC-024: Async mode fixes Cloudflare 100s gateway timeout for large swarms.\n\nReturns:\n    thread_id for status polling or resume with decision.","operationId":"analyze_board_meeting_api_board_meeting_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoardMeetingRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoardMeetingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/board-meeting/resume":{"post":{"tags":["board-meeting"],"summary":"Resume Board Meeting","description":"Resume board meeting graph with CEO decision.\n\nCalled after CEO clicks button in Telegram to record final decision.","operationId":"resume_board_meeting_api_board_meeting_resume_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoardMeetingResumeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoardMeetingResumeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/board-meeting/status/{thread_id}":{"get":{"tags":["board-meeting"],"summary":"Get Meeting Status","description":"Get current status of a board meeting.\n\nFor async meetings (Level 3+), first checks background task results.\nThen falls back to checkpointer state.\n\nReturns the meeting state including:\n- Current status (processing, awaiting_decision, complete, timeout, error)\n- Phase progress (agents complete vs total)\n- Confidence level if available\n- Processing time if complete\n- Full result data if complete (for async meetings)\n\nSprint 5 - BM-025: Status endpoint for polling meeting progress.\nSAC-024: Enhanced to support async background task results.","operationId":"get_meeting_status_api_board_meeting_status__thread_id__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Meeting Status Api Board Meeting Status  Thread Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/board-meeting/agent-calibration/{agent_name}":{"get":{"tags":["board-meeting"],"summary":"Get Agent Calibration","description":"Get calibration metrics for a specific agent.\n\nReturns calibration metrics including:\n- ECE (Expected Calibration Error) - fixed-width binning\n- ACE (Adaptive Calibration Error) - equal-count binning (primary metric)\n- Brier Score - proper scoring rule\n- Bootstrap 95% confidence interval for ECE\n- Bin diagnostics with sparse bin warnings\n\nStatus thresholds (based on ACE):\n- good: ACE < 0.05\n- warning: 0.05 <= ACE <= 0.10\n- poor: ACE > 0.10\n- insufficient_data: < 10 predictions with outcomes","operationId":"get_agent_calibration_api_board_meeting_agent_calibration__agent_name__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"agent_name","in":"path","required":true,"schema":{"type":"string","title":"Agent Name"}},{"name":"include_bootstrap","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Include Bootstrap"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/board-meeting/calibration-report":{"get":{"tags":["board-meeting"],"summary":"Get Calibration Report","description":"Get calibration report for all agents.\n\nReturns calibration metrics for all agents, sorted by status (worst first).\n\nIncludes summary statistics:\n- Count by status (good/warning/poor/insufficient_data)\n- Average ACE across calibrated agents\n\nNote: include_bootstrap=False by default for performance. Set to True\nfor confidence intervals (adds ~1s per agent).","operationId":"get_calibration_report_api_board_meeting_calibration_report_get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"include_bootstrap","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Bootstrap"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/board-meeting/feedback/t7":{"post":{"tags":["board-meeting"],"summary":"Record T7 Feedback","description":"Record T+7 feedback for a board meeting decision.\n\nCalled 7 days after a decision to check if it's tracking well.\n\nArgs:\n    body: T7FeedbackRequest with thread_id, on_track, and optional notes\n\nReturns:\n    Success status and updated record","operationId":"record_t7_feedback_api_board_meeting_feedback_t7_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/T7FeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__models__FeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/board-meeting/feedback/t30":{"post":{"tags":["board-meeting"],"summary":"Record T30 Outcome","description":"Record T+30 outcome for a board meeting decision.\n\nCalled 30 days after a decision to record final outcome.\n\nArgs:\n    body: T30OutcomeRequest with thread_id, outcome, and optional details\n\nReturns:\n    Success status and agent accuracy updates","operationId":"record_t30_outcome_api_board_meeting_feedback_t30_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/T30OutcomeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Record T30 Outcome Api Board Meeting Feedback T30 Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/board-meeting/pending-feedback":{"get":{"tags":["board-meeting"],"summary":"Get Pending Feedback","description":"Get board meetings pending T+7 or T+30 feedback.\n\nReturns list of meetings that need feedback, sorted by urgency.\nUsed by n8n to send Telegram reminders.","operationId":"get_pending_feedback_api_board_meeting_pending_feedback_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PendingFeedbackResponse"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/board-meeting/send-reminder/{thread_id}":{"post":{"tags":["board-meeting"],"summary":"Send Feedback Reminder","description":"Send a feedback reminder via Telegram.\n\nArgs:\n    thread_id: The board meeting thread ID\n    reminder_type: \"t7\" or \"t30\"\n\nTriggers n8n workflow to send Telegram message with HITL buttons.","operationId":"send_feedback_reminder_api_board_meeting_send_reminder__thread_id__post","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}},{"name":"reminder_type","in":"query","required":true,"schema":{"type":"string","title":"Reminder Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Send Feedback Reminder Api Board Meeting Send Reminder  Thread Id  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/board-meeting/pre-call":{"post":{"tags":["board-meeting"],"summary":"Pre Call Intelligence","description":"Generate pre-call intelligence playbook for Ruben voice agent.\n\nRuns a lightweight Level 0 board meeting analysis to produce\ntalking points, objection handlers, and opening hooks for a lead.\n\nDYN-100: Pre-call endpoint\nDYN-101: n8n integration (called during 60s wait before call)\nDYN-102: Enriched metadata for Ruben\nDYN-103: Playbook quality scoring","operationId":"pre_call_intelligence_api_board_meeting_pre_call_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreCallRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Pre Call Intelligence Api Board Meeting Pre Call Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/board-meeting/evaluate/{thread_id}":{"post":{"tags":["board-meeting"],"summary":"Evaluate Meeting","description":"Run LLM-as-Judge evaluation on a completed board meeting.\n\nScores the meeting decision on reasoning quality, evidence usage,\nrisk assessment, cost efficiency, and recommendation clarity.\n\nDYN-107: Evaluation template\nDYN-108: Automated trigger\nDYN-109: Regression alerting","operationId":"evaluate_meeting_api_board_meeting_evaluate__thread_id__post","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Evaluate Meeting Api Board Meeting Evaluate  Thread Id  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vector/search":{"post":{"tags":["vector"],"summary":"Search Similar Items","description":"Search for similar items using vector similarity.\n\nUIL Phase 3: Enables finding similar historical decisions, leads, or content.\n\nReturns:\n    List of similar items sorted by similarity (highest first).","operationId":"search_similar_items_api_vector_search_post","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"_request","in":"query","required":false,"schema":{"title":" Request"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VectorSearchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VectorSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vision/ui-to-code":{"post":{"tags":["vision"],"summary":"Ui To Code","description":"Generate React code from image or text description.\n\n**Image mode (preferred):**\nUpload a screenshot, mockup, or design image.\nKimi K2.5 will analyze it and generate matching React code.\n\n**Text mode (fallback):**\nDescribe the UI you want in words.\n\nExample (image):\n```json\n{\n    \"image_url\": \"https://example.com/design.png\",\n    \"context\": \"Dark mode dashboard for SaaS\"\n}\n```\n\nExample (text):\n```json\n{\n    \"description\": \"Pricing table with 3 tiers, monthly/yearly toggle\",\n    \"components_hint\": [\"Card\", \"Switch\", \"Badge\"]\n}\n```","operationId":"ui_to_code_api_vision_ui_to_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UIToCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UIToCodeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/vision/status/{thread_id}":{"get":{"tags":["vision"],"summary":"Get Status","description":"Get status for a generation request.\n\nNote: With the simplified pipeline, most requests complete synchronously.\nThis endpoint is kept for compatibility.","operationId":"get_status_api_vision_status__thread_id__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Status Api Vision Status  Thread Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vision/feedback":{"post":{"tags":["vision"],"summary":"Submit Feedback","description":"Submit feedback on generated code.\n\nThis helps improve future generations.","operationId":"submit_feedback_api_vision_feedback_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__routes__vision__FeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/style-transfer/extract":{"post":{"tags":["style-transfer"],"summary":"Extract From Url","description":"Extract product data from e-commerce URL.\n\nUses Tavily Extract API with advanced depth to get:\n- Product title, description, price\n- Ratings and review counts\n- All product images\n- Category and brand information\n\nImages are optionally downloaded and stored in Supabase Storage.\n\nReturns:\n    ExtractResponse with structured product data","operationId":"extract_from_url_api_style_transfer_extract_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtractRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtractResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/style-transfer/manual":{"post":{"tags":["style-transfer"],"summary":"Manual Input","description":"Create extraction from manually provided product data.\n\nUse this when URL extraction fails due to bot protection.\n\nHow to use:\n1. Open product page in browser\n2. Copy product title and description\n3. Right-click images -> \"Copy Image Address\" for URLs\n4. Submit to this endpoint\n\nThe data is processed exactly like auto-extraction.","operationId":"manual_input_api_style_transfer_manual_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManualInputRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtractResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/style-transfer/prepare/{extraction_id}":{"get":{"tags":["style-transfer"],"summary":"Prepare For Analysis","description":"Get StyleInput for passing to style analysis.\n\nThis endpoint prepares extracted data for the 100-agent swarm.\nUse this before calling /api/board-meeting/analyze with decision_type=\"creative\".\n\nNote: For MVP, this returns the stored extraction data.\nIn production, this would query the database.","operationId":"prepare_for_analysis_api_style_transfer_prepare__extraction_id__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"extraction_id","in":"path","required":true,"schema":{"type":"string","title":"Extraction Id"}},{"name":"industry","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Industry"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StyleInputResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/style-transfer/analyze":{"post":{"tags":["style-transfer"],"summary":"Analyze Style","description":"Run 100-agent style analysis on product data.\n\nUses the board meeting swarm with decision_type=\"creative\" to analyze:\n- Visual style (colors, lighting, composition)\n- Brand alignment\n- E-commerce best practices\n\nThe analysis runs asynchronously. Poll GET /status/{thread_id} for results.\n\nReturns:\n    thread_id for polling, or complete results for Level 0-1","operationId":"analyze_style_api_style_transfer_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StyleAnalyzeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StyleAnalyzeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/style-transfer/status/{thread_id}":{"get":{"tags":["style-transfer"],"summary":"Get Analysis Status","description":"Get status of style analysis and image generation by thread_id.\n\nPoll this endpoint until status is 'complete' or 'error'.\nAfter calling /generate, also check `generation_status` for image results.\n\nRecommended polling interval: 2-3 seconds.\n\nFields:\n    - status: Analysis status (processing|complete|error|timeout)\n    - generation_status: Image generation status (generating|complete|error|timeout)\n    - generated_images: List of generated images (when generation_status=complete)","operationId":"get_analysis_status_api_style_transfer_status__thread_id__get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StyleAnalyzeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/style-transfer/generate":{"post":{"tags":["style-transfer"],"summary":"Generate Images","description":"Generate styled product images using FLUX.2 Max.\n\nRequires a completed style analysis (thread_id).\nUses the style_dna from analysis to guide image generation.\n\n**ASYNC MODE:** Generation runs in background to prevent image loss on client disconnect.\nPoll GET /status/{thread_id} for results. Check `generation_status` field.\n\nReturns:\n    GenerateResponse with status=\"generating\" - poll /status for images","operationId":"generate_images_api_style_transfer_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/style-transfer/full-pipeline":{"post":{"tags":["style-transfer"],"summary":"Run Full Pipeline","description":"Run complete style transfer pipeline.\n\n**Flow A (URL mode):** Provide `product_url` for automatic extraction.\n**Flow B (Manual mode):** Provide `title` + `description` + optional `image_urls`.\n\nThe pipeline runs asynchronously:\n1. Extract product data (or use manual input)\n2. Run 100-agent style analysis\n3. Generate styled images with FLUX.2 Max\n\nPoll GET /status/{thread_id} for progress and results.\n\nArgs:\n    body: Pipeline request with either product_url (Flow A) or title (Flow B)\n\nReturns:\n    FullPipelineResponse with thread_id for polling","operationId":"run_full_pipeline_api_style_transfer_full_pipeline_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FullPipelineRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FullPipelineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/style-transfer/{thread_id}/pdf":{"get":{"tags":["style-transfer"],"summary":"Download Brand Kit Pdf","description":"Download Brand Kit PDF for completed style analysis.\n\nGenerates a professional PDF containing:\n- Color palette with hex codes\n- Photography style rules (lighting, background, composition)\n- Do's and Don'ts\n- Expert insights with confidence scores\n- 8-image shot list with prompts\n\nThe analysis must be complete before PDF generation.\n\nReturns:\n    PDF file download (application/pdf)","operationId":"download_brand_kit_pdf_api_style_transfer__thread_id__pdf_get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Basic health check endpoint for Docker/Caddy.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/health/ready":{"get":{"summary":"Health Check Detailed","description":"Detailed health check with dependency status.\n\nChecks:\n- Tavily API connectivity\n- Supabase connectivity\n- Langfuse connectivity\n- OpenRouter/LLM connectivity","operationId":"health_check_detailed_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthDetailResponse"}}}}}}},"/health/timeouts":{"get":{"summary":"Timeout Stats","description":"Get timeout tracking statistics.\n\nShows configuration for timeout alerting.\nUseful for monitoring and debugging 504 issues.","operationId":"timeout_stats_health_timeouts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint with API info.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BoardMeetingRequest":{"properties":{"topic":{"type":"string","maxLength":5000,"minLength":10,"title":"Topic","description":"Decision topic to analyze"},"level":{"type":"integer","maximum":5.0,"minimum":0.0,"title":"Level","description":"Complexity level 0-5","default":2},"decision_type":{"type":"string","enum":["financial","technical","operational","strategic","market","organizational","legal"],"title":"Decision Type","description":"Domain type for weighted voting"},"options":{"items":{"type":"string"},"type":"array","maxItems":5,"minItems":2,"title":"Options","description":"Options to evaluate"},"skip_research":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Skip Research","description":"Skip R&D web research phase. Default: True for level 0-1, False for level 2+"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context","description":"Additional business context (max 50KB)"}},"type":"object","required":["topic","decision_type","options"],"title":"BoardMeetingRequest","description":"Request payload for /api/board-meeting/analyze endpoint.\n\nSAC-020: Added input validation for security baseline."},"BoardMeetingResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID for HITL resume"},"agent_analyses":{"additionalProperties":true,"type":"object","title":"Agent Analyses","description":"6 agent analyses"},"weighted_scores":{"additionalProperties":true,"type":"object","title":"Weighted Scores","description":"Option -> weighted score"},"confidence_level":{"type":"string","enum":["HIGH","MEDIUM","LOW","PENDING"],"title":"Confidence Level","description":"Overall confidence (PENDING for async)"},"status":{"type":"string","title":"Status","description":"Current status","default":"awaiting_decision"},"processing_time_ms":{"type":"integer","title":"Processing Time Ms","description":"Processing time","default":0},"cost_summary":{"additionalProperties":true,"type":"object","title":"Cost Summary","description":"Cost tracking summary"},"rd_research":{"additionalProperties":true,"type":"object","title":"Rd Research","description":"R&D research results with sources"},"capability_gaps":{"items":{},"type":"array","title":"Capability Gaps","description":"Identified capability gaps"},"spawned_specialists":{"items":{},"type":"array","title":"Spawned Specialists","description":"Specialists spawned for gaps"},"similar_decisions":{"items":{"$ref":"#/components/schemas/SimilarDecision"},"type":"array","title":"Similar Decisions","description":"Similar historical decisions from vector search (UIL Phase 3)"}},"type":"object","required":["thread_id","confidence_level"],"title":"BoardMeetingResponse","description":"Response from /api/board-meeting/analyze endpoint."},"BoardMeetingResumeRequest":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID from analyze response"},"decision":{"type":"string","enum":["ADOPT","PASS","DEFER","EXPERIMENT"],"title":"Decision","description":"CEO decision"},"rationale":{"type":"string","title":"Rationale","description":"Decision rationale","default":""}},"type":"object","required":["thread_id","decision"],"title":"BoardMeetingResumeRequest","description":"Request to resume board meeting after CEO decision."},"BoardMeetingResumeResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID"},"ceo_decision":{"type":"string","title":"Ceo Decision","description":"Recorded CEO decision"},"status":{"type":"string","title":"Status","description":"Final status","default":"complete"},"final_state":{"additionalProperties":true,"type":"object","title":"Final State","description":"Complete final state"}},"type":"object","required":["thread_id","ceo_decision"],"title":"BoardMeetingResumeResponse","description":"Response after resuming board meeting with decision."},"ContentCreateRequest":{"properties":{"request_type":{"type":"string","enum":["text","visual","combined"],"title":"Request Type","description":"Type of content to generate","default":"text"},"topics":{"items":{"type":"string"},"type":"array","title":"Topics","description":"Topics for content"},"platform":{"type":"string","enum":["linkedin","twitter","instagram","blog"],"title":"Platform","description":"Target platform","default":"linkedin"},"count":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Count","description":"Pieces per topic","default":1},"tone":{"type":"string","enum":["professional","casual","educational","promotional"],"title":"Tone","description":"Content tone","default":"professional"},"visual_prompt":{"type":"string","title":"Visual Prompt","description":"Image generation prompt","default":""},"visual_style":{"type":"string","enum":["photo","graphic","illustration","logo"],"title":"Visual Style","description":"Visual style","default":"graphic"},"dimensions":{"type":"string","title":"Dimensions","description":"Image dimensions","default":"1080x1080"},"brand_colors":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Brand Colors","description":"Brand colors for visual"}},"type":"object","title":"ContentCreateRequest","description":"Request for unified content creation via Content Director.\n\nSupports text-only, visual-only, or combined generation."},"ContentCreateResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Unique thread ID for resuming"},"status":{"type":"string","title":"Status","description":"pending_review, published, or failed"},"request_type":{"type":"string","title":"Request Type","description":"Echo of request type"},"final_content":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Final Content","description":"Generated text content"},"final_visuals":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Final Visuals","description":"Generated visual content"},"processing_time_ms":{"type":"integer","title":"Processing Time Ms","description":"Processing time","default":0},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"Any errors"}},"type":"object","required":["thread_id","status","request_type"],"title":"ContentCreateResponse","description":"Response from content creation - may be pending HITL review."},"ExtractRequest":{"properties":{"url":{"type":"string","maxLength":2000,"minLength":10,"title":"Url","description":"Product URL to extract (e.g., Bol.com product page)"},"industry":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Industry","description":"Industry hint for research phase (optional)"},"store_images":{"type":"boolean","title":"Store Images","description":"Whether to download and store images in Supabase","default":true}},"type":"object","required":["url"],"title":"ExtractRequest","description":"Request payload for /api/style-transfer/extract endpoint."},"ExtractResponse":{"properties":{"extraction_id":{"type":"string","title":"Extraction Id","description":"Unique extraction identifier"},"status":{"type":"string","title":"Status","description":"Extraction status","default":"complete"},"url":{"type":"string","title":"Url","description":"Source URL"},"title":{"type":"string","title":"Title","description":"Product title","default":""},"description":{"type":"string","title":"Description","description":"Product description","default":""},"price":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Price","description":"Product price"},"ratings":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Ratings","description":"Product rating"},"review_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Review Count","description":"Number of reviews"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"Product category"},"brand":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Brand","description":"Product brand"},"images":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Images","description":"Product images"},"image_count":{"type":"integer","title":"Image Count","description":"Number of images extracted","default":0},"latency_ms":{"type":"integer","title":"Latency Ms","description":"Extraction latency","default":0},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if failed"}},"type":"object","required":["extraction_id","url"],"title":"ExtractResponse","description":"Response from /api/style-transfer/extract endpoint."},"FeedbackRequest":{"properties":{"thread_id":{"type":"string","title":"Thread Id"},"usability_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Usability Score"},"feedback_text":{"type":"string","title":"Feedback Text","default":""},"code_was_useful":{"type":"boolean","title":"Code Was Useful","default":true}},"type":"object","required":["thread_id","usability_score"],"title":"FeedbackRequest","description":"Request to submit feedback."},"FullPipelineRequest":{"properties":{"product_url":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Product Url","description":"Product URL for automatic extraction (Flow A)"},"title":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Title","description":"Product title for manual input (Flow B)"},"description":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Description","description":"Product description (Flow B)"},"brand":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Brand","description":"Product brand"},"category":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Category","description":"Product category"},"price":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Price","description":"Product price"},"image_urls":{"items":{"type":"string"},"type":"array","maxItems":20,"title":"Image Urls","description":"Image URLs (Flow B or supplement to Flow A)"},"image_base64s":{"items":{"type":"string"},"type":"array","maxItems":8,"title":"Image Base64S","description":"Base64 encoded product images (Flow B file upload)"},"logo_base64":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Logo Base64","description":"Base64 encoded logo image (Flow B)"},"industry":{"type":"string","maxLength":50,"title":"Industry","description":"Industry for style analysis context","default":"general"},"level":{"type":"integer","maximum":5.0,"minimum":0.0,"title":"Level","description":"Analysis level (0-5). Default 2 for demo.","default":2},"image_count":{"type":"integer","maximum":8.0,"minimum":1.0,"title":"Image Count","description":"Number of images to generate (1-8)","default":4},"aspect_ratio":{"type":"string","title":"Aspect Ratio","description":"Image aspect ratio (1:1, 16:9, 4:5)","default":"1:1"},"reference_url":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Reference Url","description":"Reference product URL for style extraction"}},"type":"object","title":"FullPipelineRequest","description":"Request payload for /api/style-transfer/full-pipeline endpoint.\n\nSupports two modes:\n- Flow A (URL mode): Provide product_url for automatic extraction\n- Flow B (Manual mode): Provide title + description + images directly\n\nThe endpoint will:\n1. Extract/accept product data\n2. Run style analysis (100-agent swarm)\n3. Generate styled images\n4. Return thread_id for polling"},"FullPipelineResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID for status polling"},"mode":{"type":"string","title":"Mode","description":"Flow mode: url|manual"},"status":{"type":"string","title":"Status","description":"Pipeline status","default":"processing"},"extraction_status":{"type":"string","title":"Extraction Status","description":"Extraction stage status","default":"pending"},"analysis_status":{"type":"string","title":"Analysis Status","description":"Analysis stage status","default":"pending"},"generation_status":{"type":"string","title":"Generation Status","description":"Generation stage status","default":"pending"},"product_title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Title","description":"Product title"},"product_images":{"items":{"type":"string"},"type":"array","title":"Product Images","description":"Product image URLs"},"style_dna":{"anyOf":[{"$ref":"#/components/schemas/StyleDNA"},{"type":"null"}],"description":"Style DNA"},"confidence_level":{"type":"string","title":"Confidence Level","description":"Analysis confidence","default":"PENDING"},"generated_images":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Generated Images","description":"Generated images"},"generation_cost_usd":{"type":"number","title":"Generation Cost Usd","description":"Total cost","default":0.0},"processing_time_ms":{"type":"integer","title":"Processing Time Ms","description":"Total time so far","default":0},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error if failed"}},"type":"object","required":["thread_id","mode"],"title":"FullPipelineResponse","description":"Response from /api/style-transfer/full-pipeline endpoint."},"GenerateRequest":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID from style analysis (to get style_dna)"},"product_title":{"type":"string","maxLength":500,"minLength":3,"title":"Product Title","description":"Product title for prompt generation"},"product_description":{"type":"string","maxLength":2000,"title":"Product Description","description":"Product description for context","default":""},"image_count":{"type":"integer","maximum":8.0,"minimum":1.0,"title":"Image Count","description":"Number of images to generate (1-8)","default":4},"aspect_ratio":{"type":"string","title":"Aspect Ratio","description":"Image aspect ratio (1:1, 16:9, 4:5)","default":"1:1"}},"type":"object","required":["thread_id","product_title"],"title":"GenerateRequest","description":"Request payload for /api/style-transfer/generate endpoint."},"GenerateResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID"},"status":{"type":"string","title":"Status","description":"Generation status","default":"complete"},"images":{"items":{"$ref":"#/components/schemas/GeneratedImage"},"type":"array","title":"Images"},"total_cost_usd":{"type":"number","title":"Total Cost Usd","description":"Total generation cost","default":0.0},"total_latency_ms":{"type":"integer","title":"Total Latency Ms","description":"Total generation time","default":0},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["thread_id"],"title":"GenerateResponse","description":"Response from /api/style-transfer/generate endpoint."},"GeneratedImage":{"properties":{"slot":{"type":"integer","title":"Slot","description":"Image slot number (1-8)"},"image_url":{"type":"string","title":"Image Url","description":"Data URL for generated image"},"prompt":{"type":"string","title":"Prompt","description":"Prompt used for generation"},"cost_usd":{"type":"number","title":"Cost Usd","description":"Generation cost","default":0.0},"latency_ms":{"type":"integer","title":"Latency Ms","description":"Generation time","default":0}},"type":"object","required":["slot","image_url","prompt"],"title":"GeneratedImage","description":"Single generated image result."},"HITLPendingItem":{"properties":{"thread_id":{"type":"string","title":"Thread Id"},"request_type":{"type":"string","title":"Request Type"},"content_count":{"type":"integer","title":"Content Count"},"visual_count":{"type":"integer","title":"Visual Count"},"platform":{"type":"string","title":"Platform"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["thread_id","request_type","content_count","visual_count","platform","created_at"],"title":"HITLPendingItem","description":"Single pending HITL item."},"HITLPendingResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/HITLPendingItem"},"type":"array","title":"Items"},"count":{"type":"integer","title":"Count","default":0}},"type":"object","title":"HITLPendingResponse","description":"List of pending HITL items."},"HITLResumeRequest":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID from content creation"},"decision":{"type":"string","enum":["approve","reject","edit"],"title":"Decision","description":"Review decision"},"feedback":{"type":"string","title":"Feedback","description":"Edit instructions or rejection reason","default":""},"request_regeneration":{"type":"boolean","title":"Request Regeneration","description":"Request content regeneration","default":false}},"type":"object","required":["thread_id","decision"],"title":"HITLResumeRequest","description":"Request to resume paused graph after HITL review."},"HITLResumeResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID"},"status":{"type":"string","title":"Status","description":"Final status after resume"},"final_content":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Final Content","description":"Final content"},"final_visuals":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Final Visuals","description":"Final visuals"},"message":{"type":"string","title":"Message","description":"Status message","default":""}},"type":"object","required":["thread_id","status"],"title":"HITLResumeResponse","description":"Response after resuming graph."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthDetailResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Overall status: ok or degraded"},"checks":{"additionalProperties":true,"type":"object","title":"Checks","description":"Individual service checks"},"uptime_seconds":{"type":"integer","title":"Uptime Seconds","description":"Seconds since startup","default":0}},"type":"object","required":["status"],"title":"HealthDetailResponse","description":"Detailed health check response with dependency status."},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"},"service":{"type":"string","title":"Service","default":"agents-api"},"version":{"type":"string","title":"Version","default":"1.0.0"}},"type":"object","title":"HealthResponse","description":"Health check response."},"ManualInputRequest":{"properties":{"title":{"type":"string","maxLength":500,"minLength":5,"title":"Title","description":"Product title (copy from website)"},"description":{"type":"string","maxLength":5000,"title":"Description","description":"Product description (copy from website)","default":""},"price":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Price","description":"Product price (e.g., 'â‚¬399')"},"brand":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Brand","description":"Product brand"},"category":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Category","description":"Product category"},"image_urls":{"items":{"type":"string"},"type":"array","maxItems":20,"title":"Image Urls","description":"Image URLs (right-click -> Copy Image Address)"},"image_base64":{"items":{"type":"string"},"type":"array","maxItems":10,"title":"Image Base64","description":"Base64 encoded images (for uploaded files)"},"source_url":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Source Url","description":"Original product URL for reference"},"industry":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Industry","description":"Industry hint"}},"type":"object","required":["title"],"title":"ManualInputRequest","description":"Manual input when URL extraction is blocked by bot protection.\n\nUser provides product data by:\n1. Copy-pasting title and description from the website\n2. Saving product images locally and providing base64 or URLs"},"PendingFeedbackItem":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Board meeting thread ID"},"topic":{"type":"string","title":"Topic","description":"Decision topic"},"ceo_decision":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ceo Decision","description":"The decision that was made"},"feedback_status":{"type":"string","title":"Feedback Status","description":"T+7 Due or T+30 Due"},"days_since_decision":{"type":"integer","title":"Days Since Decision","description":"Days since the decision was made"}},"type":"object","required":["thread_id","topic","feedback_status","days_since_decision"],"title":"PendingFeedbackItem","description":"A board meeting pending feedback."},"PendingFeedbackResponse":{"properties":{"total_pending":{"type":"integer","title":"Total Pending","default":0},"t7_due":{"items":{"$ref":"#/components/schemas/PendingFeedbackItem"},"type":"array","title":"T7 Due"},"t30_due":{"items":{"$ref":"#/components/schemas/PendingFeedbackItem"},"type":"array","title":"T30 Due"}},"type":"object","title":"PendingFeedbackResponse","description":"Response listing pending feedback items."},"PreCallRequest":{"properties":{"lead_name":{"type":"string","title":"Lead Name","description":"Lead's name"},"industry":{"type":"string","title":"Industry","description":"Lead's industry (e.g., loodgieter, elektricien)"},"quiz_score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Quiz Score","description":"Quiz score 0-100"},"pain_points":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Pain Points","description":"Identified pain points"},"urgency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Urgency","description":"Urgency level from quiz"}},"type":"object","required":["lead_name","industry"],"title":"PreCallRequest","description":"Request for pre-call intelligence analysis (DYN-100)."},"ProcessLeadRequest":{"properties":{"lead_id":{"type":"string","title":"Lead Id","description":"Unique lead identifier (usually email)"},"company_name":{"type":"string","title":"Company Name","description":"Company name to research"},"lead_name":{"type":"string","title":"Lead Name","description":"Lead's full name","default":"Unknown"},"quiz_score":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Quiz Score","description":"Quiz score 0-100","default":0},"location":{"type":"string","title":"Location","description":"Geographic location","default":"Belgium"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email","description":"Lead email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Lead phone number"},"industry":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Industry","description":"Industry hint from quiz"},"project_value":{"type":"string","title":"Project Value","description":"Average project value","default":"â‚¬2.000 - â‚¬5.000"},"budget":{"type":"string","title":"Budget","description":"Marketing budget","default":"â‚¬0 (geen budget)"},"urgency":{"type":"string","title":"Urgency","description":"Timeline urgency","default":"Deze maand nog"},"team_size":{"type":"string","title":"Team Size","description":"Team size","default":"1 (alleen ik)"},"main_pain_point":{"type":"string","title":"Main Pain Point","description":"Primary pain point","default":"Te weinig aanvragen"}},"type":"object","required":["lead_id","company_name"],"title":"ProcessLeadRequest","description":"Request payload for /api/process-lead endpoint.\n\nMatches fields expected by n8n quiz webhook."},"ProcessLeadResponse":{"properties":{"lead_id":{"type":"string","title":"Lead Id"},"tier":{"type":"string","enum":["HOT","WARM","COLD"],"title":"Tier","description":"Lead tier classification"},"qualification_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qualification Reason","description":"Why lead was classified this way"},"next_action":{"type":"string","enum":["call","email","nurture","disqualify"],"title":"Next Action","description":"Recommended next action"},"playbook_html":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Playbook Html","description":"HTML sales playbook for call prep"},"playbook_pdf_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Playbook Pdf Url","description":"Signed URL to PDF playbook in Supabase Storage"},"talking_points":{"items":{"type":"string"},"type":"array","title":"Talking Points","description":"Key talking points for call"},"opening_hook":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Opening Hook","description":"Personalized opening line"},"kbo_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kbo Number","description":"Belgian company number"},"kvk_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kvk Number","description":"Dutch company number"},"processing_time_ms":{"type":"integer","title":"Processing Time Ms","description":"Total processing time","default":0},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"Any errors during processing"}},"type":"object","required":["lead_id","tier","next_action"],"title":"ProcessLeadResponse","description":"Response from /api/process-lead endpoint.\n\nContains tier classification, playbook, and routing decision."},"SimilarDecision":{"properties":{"source_id":{"type":"string","title":"Source Id","description":"Thread ID of similar decision"},"topic":{"type":"string","title":"Topic","description":"Topic of similar decision"},"outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outcome","description":"Outcome if tracked"},"similarity":{"type":"number","title":"Similarity","description":"Similarity score 0-1"},"domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Domain","description":"Decision domain"}},"type":"object","required":["source_id","topic","similarity"],"title":"SimilarDecision","description":"Similar historical decision from vector search.\n\nUIL Phase 3: Vector Intelligence integration."},"SimilarItem":{"properties":{"id":{"type":"string","title":"Id","description":"Embedding record ID"},"source_table":{"type":"string","title":"Source Table","description":"Source table name"},"source_id":{"type":"string","title":"Source Id","description":"ID in source table"},"content_text":{"type":"string","title":"Content Text","description":"Embedded text content"},"similarity":{"type":"number","title":"Similarity","description":"Similarity score 0-1"},"domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Domain","description":"Domain category"},"outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outcome","description":"Outcome if tracked"}},"type":"object","required":["id","source_table","source_id","content_text","similarity"],"title":"SimilarItem","description":"Similar item in search results."},"StyleAnalyzeRequest":{"properties":{"title":{"type":"string","maxLength":500,"minLength":3,"title":"Title","description":"Product title for analysis"},"description":{"type":"string","maxLength":5000,"title":"Description","description":"Product description for USP extraction","default":""},"brand":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Brand","description":"Product brand"},"category":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Category","description":"Product category"},"industry":{"type":"string","maxLength":50,"title":"Industry","description":"Industry for research context (e.g., 'electronics', 'fashion')","default":"general"},"keywords":{"items":{"type":"string"},"type":"array","maxItems":20,"title":"Keywords","description":"Extracted keywords from title"},"usps":{"items":{"additionalProperties":true,"type":"object"},"type":"array","maxItems":10,"title":"Usps","description":"Extracted USPs with text and frequency"},"image_urls":{"items":{"type":"string"},"type":"array","maxItems":20,"title":"Image Urls","description":"Product image URLs for style analysis"},"level":{"type":"integer","maximum":5.0,"minimum":0.0,"title":"Level","description":"Analysis level (0-5). Higher = more agents. Default 3 for full analysis.","default":3}},"type":"object","required":["title"],"title":"StyleAnalyzeRequest","description":"Request payload for /api/style-transfer/analyze endpoint."},"StyleAnalyzeResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Thread ID for status polling"},"status":{"type":"string","title":"Status","description":"Analysis status","default":"processing"},"agents_complete":{"type":"integer","title":"Agents Complete","description":"Number of agents completed","default":0},"agents_total":{"type":"integer","title":"Agents Total","description":"Total agents spawned","default":0},"processing_time_ms":{"type":"integer","title":"Processing Time Ms","description":"Processing time","default":0},"style_dna":{"anyOf":[{"$ref":"#/components/schemas/StyleDNA"},{"type":"null"}],"description":"Style DNA (when complete)"},"agent_insights":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Agent Insights","description":"Individual agent analyses"},"confidence_level":{"type":"string","title":"Confidence Level","description":"Overall confidence","default":"PENDING"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if failed"},"generation_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Generation Status","description":"Generation status: generating|complete|error|timeout"},"generated_images":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Generated Images","description":"Generated images (when complete)"},"generation_cost_usd":{"type":"number","title":"Generation Cost Usd","description":"Total generation cost","default":0.0},"generation_latency_ms":{"type":"integer","title":"Generation Latency Ms","description":"Generation time","default":0},"mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mode","description":"Pipeline mode: url|manual (for full-pipeline)"},"extraction_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Extraction Status","description":"Extraction stage status"},"analysis_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Analysis Status","description":"Analysis stage status"},"product_title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Title","description":"Extracted/provided product title"},"product_images":{"items":{"type":"string"},"type":"array","title":"Product Images","description":"Product image URLs"}},"type":"object","required":["thread_id"],"title":"StyleAnalyzeResponse","description":"Response from /api/style-transfer/analyze and /status endpoints."},"StyleDNA":{"properties":{"colors":{"additionalProperties":true,"type":"object","title":"Colors","description":"Color palette analysis"},"lighting":{"type":"string","title":"Lighting","description":"Recommended lighting style","default":""},"composition":{"additionalProperties":true,"type":"object","title":"Composition","description":"Composition guidelines"},"mood":{"items":{"type":"string"},"type":"array","title":"Mood","description":"Mood keywords"},"background":{"type":"string","title":"Background","description":"Background recommendation","default":""}},"type":"object","title":"StyleDNA","description":"Style DNA output from 100-agent analysis."},"StyleInputResponse":{"properties":{"extraction_id":{"type":"string","title":"Extraction Id"},"url":{"type":"string","title":"Url"},"title":{"type":"string","title":"Title"},"description":{"type":"string","title":"Description"},"brand":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Brand"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"image_urls":{"items":{"type":"string"},"type":"array","title":"Image Urls"},"industry":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Industry"}},"type":"object","required":["extraction_id","url","title","description","brand","category","image_urls","industry"],"title":"StyleInputResponse","description":"StyleInput prepared for 100-agent analysis."},"T30OutcomeRequest":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Board meeting thread ID"},"outcome":{"type":"string","enum":["SUCCESS","PARTIAL","FAILURE","ABANDONED"],"title":"Outcome","description":"Final outcome of the decision"},"actual_result":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Actual Result","description":"What actually happened"},"lessons_learned":{"anyOf":[{"type":"string","maxLength":5000},{"type":"null"}],"title":"Lessons Learned","description":"Insights for future decisions"},"winning_option":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winning Option","description":"Which option was ultimately correct (for agent accuracy tracking)"},"decision_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Decision Type","description":"Decision domain for Bayesian weight updates (financial, technical, operational, strategic, market)"}},"type":"object","required":["thread_id","outcome"],"title":"T30OutcomeRequest","description":"Request for T+30 final outcome."},"T7FeedbackRequest":{"properties":{"thread_id":{"type":"string","title":"Thread Id","description":"Board meeting thread ID"},"on_track":{"type":"boolean","title":"On Track","description":"Is the decision tracking well?"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes","description":"Progress notes"}},"type":"object","required":["thread_id","on_track"],"title":"T7FeedbackRequest","description":"Request for T+7 check-in feedback."},"UIToCodeRequest":{"properties":{"image_base64":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Base64","description":"Base64 encoded image (PNG, JPG, WebP)"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url","description":"URL to image"},"description":{"type":"string","maxLength":2000,"title":"Description","description":"Text description of desired UI (used if no image provided)","default":""},"components_hint":{"items":{"type":"string"},"type":"array","title":"Components Hint","description":"Preferred shadcn/ui components"},"brand_colors":{"items":{"type":"string"},"type":"array","title":"Brand Colors","description":"Brand colors (hex values)"},"context":{"type":"string","maxLength":5000,"title":"Context","description":"Additional context about the project","default":""}},"type":"object","title":"UIToCodeRequest","description":"Request to generate UI component from image or text.\n\nProvide EITHER:\n- image_base64: Base64 encoded image (screenshot, mockup, design)\n- image_url: URL to an image\n- description: Text description (if no image)"},"UIToCodeResponse":{"properties":{"thread_id":{"type":"string","title":"Thread Id"},"status":{"type":"string","title":"Status"},"component_code":{"type":"string","title":"Component Code","default":""},"types_code":{"type":"string","title":"Types Code","default":""},"description":{"type":"string","title":"Description","default":""},"components_used":{"items":{"type":"string"},"type":"array","title":"Components Used"},"confidence":{"type":"number","title":"Confidence","default":0.0},"processing_time_ms":{"type":"integer","title":"Processing Time Ms","default":0},"cost_usd":{"type":"number","title":"Cost Usd","default":0.0},"model":{"type":"string","title":"Model","default":""},"errors":{"items":{"type":"string"},"type":"array","title":"Errors"}},"type":"object","required":["thread_id","status"],"title":"UIToCodeResponse","description":"Response from UI-to-Code generation."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VectorSearchRequest":{"properties":{"query":{"type":"string","maxLength":5000,"minLength":3,"title":"Query","description":"Search query text"},"source_table":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Table","description":"Filter by source table (e.g., 'board_meeting_decisions')"},"limit":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Limit","description":"Maximum results to return","default":5},"min_similarity":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Min Similarity","description":"Minimum similarity threshold","default":0.5}},"type":"object","required":["query"],"title":"VectorSearchRequest","description":"Request model for vector search."},"VectorSearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/SimilarItem"},"type":"array","title":"Results"},"query":{"type":"string","title":"Query","description":"Original search query"},"count":{"type":"integer","title":"Count","description":"Number of results returned"}},"type":"object","required":["query","count"],"title":"VectorSearchResponse","description":"Response model for vector search."},"api__models__FeedbackResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"thread_id":{"type":"string","title":"Thread Id","description":"Board meeting thread ID"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["thread_id"],"title":"FeedbackResponse","description":"Response from feedback endpoints."},"api__routes__vision__FeedbackResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","message"],"title":"FeedbackResponse","description":"Response from feedback submission."}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"X-API-Key"}}}}